# 03-database-orm

## ë¯¸ì…˜ì— í¬í•¨ë˜ì–´ì•¼ í•˜ëŠ” ê²ƒ
* JPA, MyBatis ê°ê° CRUD êµ¬í˜„
* JPAì™€ MyBatis ë™ì‹œì— ì‚¬ìš©í•˜ê¸°
* ìš”êµ¬ì‚¬í•­ì„ ë°”íƒ•ìœ¼ë¡œ DB í…Œì´ë¸” ì„¤ê³„í•˜ê¸°
* í•„ë“œì— ì¸ë±ìŠ¤ ì ìš©í•˜ê¸°

## ìš”êµ¬ì‚¬í•­
> ë¯¸ì…˜ì— ë”°ë¡œ ìš”êµ¬ì‚¬í•­ì´ ëª…ì‹œë˜ì§€ ì•Šì•„ì„œ, ì„ì˜ë¡œ ìš”êµ¬ì‚¬í•­ì„ ìƒì„±í–ˆìŠµë‹ˆë‹¤.  

**ğŸ€ Spring Boot, JPA, MyBatis, Reactë¥¼ í™œìš©í•œ ê°„ë‹¨í•œ ë„ì„œ ê´€ë¦¬ ì‹œìŠ¤í…œ ğŸ€**  
ê¸°ë³¸ì ì¸ ë„ì„œ ì •ë³´ê´€ë¦¬, íšŒì› ê´€ë¦¬, ëŒ€ì¶œ ê´€ë¦¬ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ë„ì„œê´€ë¦¬ ì‹œìŠ¤í…œ

1. íšŒì› ê´€ë¦¬
    * íšŒì› ë“±ë¡, ì¡°íšŒ, ìˆ˜ì •
    * ì´ë©”ì¼ì„ í†µí•œ íšŒì› ê²€ìƒ‰
    * íšŒì› ë¡œê·¸ì¸ ë° ë¡œê·¸ì•„ì›ƒ
2. ë„ì„œ ê´€ë¦¬
    * ë„ì„œ ë“±ë¡, ì¡°íšŒ, ìˆ˜ì •
    * ì œëª©, ì €ì, ISBN ë˜ëŠ” ì¶œíŒì¼ë¡œ ë„ì„œ ê²€ìƒ‰
3. ëŒ€ì¶œ ê´€ë¦¬
    * íŠ¹ì • íšŒì›ì˜ ëŒ€ì¶œ ëª©ë¡ ì¡°íšŒ
    * íŠ¹ì • ë„ì„œì˜ ëŒ€ì¶œ ì´ë ¥ ì¡°íšŒ

## ì œì™¸ì‚¬í•­
* JWTë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ, Refresh Tokenì€ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

## ìš”êµ¬ì‚¬í•­ì„ ë°”íƒ•ìœ¼ë¡œ í•œ DB ì„¤ê³„
1. íšŒì›(Member) í…Œì´ë¸”
    > íšŒì›ê³ ìœ ë²ˆí˜¸ëŠ” ìœ ì¼í•´ì•¼í•˜ê³ , UUIDë¥¼ BINARY í˜•íƒœë¡œ ì €ì¥í•©ë‹ˆë‹¤.  
    > íšŒì›ì´ë¦„ê³¼ ì´ë©”ì¼ì€ ê³ ì •ê¸¸ì´ê°€ ì•„ë‹ˆê¸°ë•Œë¬¸ì— `VARCHAR` ìë£Œí˜•ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.  
    > ë¹„ë°€ë²ˆí˜¸ëŠ” `bcrypt` ì‚¬ìš© ì‹œ 60ì ê³ ì • ê¸¸ì´ê¸° ë•Œë¬¸ì— `CHAR` ìë£Œí˜•ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.  
    > ì´ë©”ì¼ì€ ê³ ìœ í•˜ê³ , ìœ ì €ê²€ìƒ‰ê³¼ ê²€ìƒ‰ ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•´ `email` í•„ë“œì— ê³ ìœ  ì¸ë±ìŠ¤ë¥¼ ì ìš©í•©ë‹ˆë‹¤.  
    * uid(íšŒì› ê³ ìœ ë²ˆí˜¸) : BINARY(16), PRIMARY_KEY
    * name(íšŒì›ì´ë¦„) : VARCHAR(50)
    * email(ì´ë©”ì¼) : VARCHAR(100), UNIQUE_INDEX
    * password(ë¹„ë°€ë²ˆí˜¸) : CHAR(60)
2. ë„ì„œ(Book) í…Œì´ë¸”
    > ë„ì„œ ê³ ìœ ë²ˆí˜¸ëŠ” ìœ ì¼í•´ì•¼ í•˜ë©°, ë“±ë¡ ì‹œ ìë™ì¦ê°€í•˜ëŠ” ì •ìˆ˜ ê°’ì„ ê°€ì§‘ë‹ˆë‹¤.  
    > ë„ì„œì œëª©ê³¼ ì €ìì´ë¦„ì€ ê³ ì •ê¸¸ì´ê°€ ì•„ë‹ˆê¸°ë•Œë¬¸ì— `VARCHAR` ìë£Œí˜•ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.  
    > ISBNì€ 13ì ê³ ì •ê¸¸ì´ê¸° ë•Œë¬¸ì— `CHAR` ìë£Œí˜•ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.  
    > ì¶œíŒì¼ì€ ì‹œê°„ ì •ë³´ì—†ì´ ë‚ ì§œë§Œ ì•Œë©´ë˜ê¸° ë•Œë¬¸ì— `DATE` ìë£Œí˜•ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.  
    > ë„ì„œì œëª©, ì €ìì´ë¦„, ISBN, ì¶œíŒì¼ ê²€ìƒ‰ì„ ìœ„í•´ ì¸ë±ìŠ¤ë¥¼ ì ìš©í•©ë‹ˆë‹¤.  
    > ISBNì€ ê³ ìœ í•˜ê¸° ë•Œë¬¸ì— ê³ ìœ  ì¸ë±ìŠ¤ë¥¼ ì ìš©í•©ë‹ˆë‹¤.
    * book_id(ë„ì„œ ê³ ìœ ë²ˆí˜¸) : INT, PRIMARY_KEY, AUTO_INCREMENT
    * title(ë„ì„œ ì œëª©) : VARCHAR(100), INDEX
    * author(ì €ì ì´ë¦„) : VARCHAR(100), INDEX
    * isbn : CHAR(13), UNIQUE_INDEX
    * publication_date(ì¶œíŒì¼) : DATE, INDEX
3. ëŒ€ì¶œ(Loan) í…Œì´ë¸”
    > ëŒ€ì¶œë²ˆí˜¸ëŠ” ìœ ì¼í•´ì•¼ í•˜ë©°, ë“±ë¡ ì‹œ ìë™ì¦ê°€í•˜ëŠ” ì •ìˆ˜ ê°’ì„ ê°€ì§‘ë‹ˆë‹¤.  
    > íšŒì› ê³ ìœ ë²ˆí˜¸ëŠ” íšŒì› í…Œì´ë¸”ì˜ `uid` í•„ë“œë¥¼ ì°¸ì¡°í•©ë‹ˆë‹¤.  
    > ë„ì„œ ê³ ìœ ë²ˆí˜¸ëŠ” ë„ì„œ í…Œì´ë¸”ì˜ `book_id` í•„ë“œë¥¼ ì°¸ì¡°í•©ë‹ˆë‹¤.
    * loan_id(ëŒ€ì¶œë²ˆí˜¸) : INT, PRIMARY_KEY, AUTO_INCREMENT
    * member_uid(íšŒì› ê³ ìœ ë²ˆí˜¸) : BINARY(16), FOREIGN_KEY
    * book_id(ë„ì„œ ê³ ìœ ë²ˆí˜¸) : INT, FOREIGN_KEY

## ìˆ˜í–‰ ê³¼ì •
* Custom Hookì„ ìƒì„±í•˜ì—¬ JWT ì¸ì¦ê´€ë ¨ ë™ì‘ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

## ì°¸ê³  ìë£Œ
* [[MySQL] 003# MySQL ë°ì´í„° íƒ€ì… (ìë£Œí˜•) ì •ë¦¬](https://devdhjo.github.io/mysql/2020/01/30/database-mysql-003.html)
* [mysql uuid to binary, binary to uuid](https://m.blog.naver.com/sung487/222253457746)
* []()
* []()
* []()
* []()
* []()
* []()
* []()
* []()
* []()
* []()
* []()
* []()
* []()